import pandas as pd
import numpy as np
import matplotlib.pyplot as plt  # Biblioteca para criação de gráficos

# ===============================
# Criando nosso DataFrame
# ===============================

# Gerando 20 idades aleatórias entre 20 e 90 anos
idades = np.random.randint(20, 90, 20)

# Gerando salários relacionados à idade
# (idade multiplicada por um valor aleatório entre 40 e 80)
salarios = idades * np.random.randint(40, 80, 20)

# Gerando pontuações relacionadas ao salário
# Usamos números decimais entre 0.5 e 1.5
pontuacoes = salarios * np.random.uniform(0.5, 1.5, 20)

# Lista de profissões possíveis
profissoes = [
    'Engenheiro', 'Professor', 'Médico', 'Advogado',
    'Designer', 'Analista', 'Gerente', 'Programador'
]

# ===============================
# Criando o DataFrame
# ===============================

novo_data = {
    'Idade': idades,                     # Coluna de idades
    'Salário': salarios,                 # Coluna de salários
    'Pontuação': pontuacoes.round(2)     # Pontuação arredondada para 2 casas decimais
}

# Criando o DataFrame a partir do dicionário
df = pd.DataFrame(novo_data)

# Adicionando uma coluna de profissões aleatórias
df['Profissão'] = np.random.choice(profissoes, size=len(df))

# Exibindo as primeiras 10 linhas do DataFrame
print(df.head(10)) 

# Calculando a média de salário para cada idade, notem que além de aplicar a função mean também aplicamos o group by pois os dados devem ser agrupados por idade.
media_salario_por_idade = df.groupby('Idade')['Salário'].mean()

# Criando o gráfico de barras com as médias de salário por idade
plt.figure(figsize=(10, 6))
bars = plt.bar(media_salario_por_idade.index, media_salario_por_idade, color='lightblue')

# Adicionando rótulos de dados
for bar in bars:
    plt.text(bar.get_x() + bar.get_width() / 2, bar.get_height(), round(bar.get_height(), 2),
             ha='center', va='bottom', fontsize=10)
#'bar.get_x() + bar.get_width() / 2' calcula a posição horizontal do texto no centro da barra
#'bar.get_height()' obtém a altura da barra, que representa a média de salário para a idade correspondente
#'round(bar.get_height(), 2)' arredonda o valor da altura da barra para 2 casas decimais
#'ha='center'' alinha o texto horizontalmente ao centro da barra de cada idade
# 'va='bottom'' alinha o texto verticalmente na parte inferior da barra de cada idade

# Adicionando rótulos ao gráfico
plt.title('Média de Salário por Idade', fontsize=16)
plt.xlabel('Idade', fontsize=12)
plt.ylabel('Média de Salário', fontsize=12)
plt.xticks(rotation=45)
plt.grid(True, linestyle='--', alpha=0.7)
plt.show()